<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hungry Bird</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet"/>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>

<body class="index-page">

<!-- Hero Section -->
<section class="hero-section text-white text-center p-1 position-relative">

  <div class="container">

<!-- Left Edge Images -->
<img src="{{ url_for('static', filename='left1.png') }}" 
     id="left-img-1" 
     class="hero-side-image d-block" 
     alt="Left Street Food">




<!-- Right Edge Images -->
<img src="{{ url_for('static', filename='right1.png') }}" 
     id="right-img-1" 
     class="hero-side-image d-block" 
     alt="Right Street Food">


<img src="{{ url_for('static', filename='right2.png') }}" 
     id="right-img-2" 
     class="hero-side-image d-none d-md-block" 
     alt="Right Street Food">




    <!-- Logo and Login/Signup Row -->
<div class="d-flex justify-content-between align-items-center">
 <!-- Logo on Left -->
<div>
  <img src="{{ url_for('static', filename='logo.png') }}" class="logo-img" height="200" alt="Hungry Bird Logo">
</div>


<!-- Login & Signup on Right -->
<div class="auth-buttons">
  <!-- About Button First -->
  <a href="#about" class="btn btn-about btn-sm shadow-sm">
    <i class="fas fa-info-circle me-1"></i> About
  </a>

  <!-- Login Button -->
  <a href="{{ url_for('main.login') }}" class="btn btn-login btn-sm shadow-sm">
    <i class="fas fa-sign-in-alt me-1"></i> Login
  </a>

  <!-- Signup Button -->
  <a href="{{ url_for('main.signup') }}" class="btn btn-signup btn-sm shadow-sm">
    <i class="fas fa-user-plus me-1"></i> Signup
  </a>
</div>


</div>

    <!-- Tagline Centered -->
    <div class="text-center mt-4">
      <h2 class="display-6 fw-bold mb-1">Chhupa Hua Zaika? 🧐</h2>
      <h1 class="display-5 fw-bold">Hungry Bird Dhoondega!! 📍</h1>
    </div>
    
  </div>



   <!-- Search Controls -->
<div class="d-flex flex-wrap justify-content-center align-items-center gap-3 mb-5 search-controls">
  <div class="dropdown">
    <button id="cityDropdownBtn" class="btn btn-light dropdown-toggle shadow-sm" type="button" data-bs-toggle="dropdown">
      <i class="fas fa-map-marker-alt me-1"></i> <span class="selected-city">Select City</span>
    </button>
    <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="#" onclick="setCity('Jaipur', 26.9124, 75.7873, '🏯 Jaipur')">🏯 Jaipur</a></li>
      <li><a class="dropdown-item" href="#" onclick="setCity('Delhi', 28.6139, 77.2090, '🏛 Delhi')">🏛 Delhi</a></li>
      <li><a class="dropdown-item" href="#" onclick="setCity('Mumbai', 19.0760, 72.8777, '🌆 Mumbai')">🌆 Mumbai</a></li>
      <li><a class="dropdown-item" href="#" onclick="detectLocation()">📍 Detect Location</a></li>
    </ul>
  </div>

  <input type="text" class="form-control shadow-sm w-50 rounded-3" id="searchBox" placeholder="Search vendors, food..." />
</div>


        <!-- Feature Cards -->
<div class="row justify-content-center feature-row">
  <!-- Card 1 -->
  <div class="col-md-3 mb-3">
    <div class="card feature-image-card text-white"
         style="background-image: url('{{ url_for('static', filename='street-food.png') }}'); height: 300px; background-size: cover; background-position: center;"
         onclick="scrollToFoodCategory()">
      <div class="card-body d-flex flex-column justify-content-end">
        <h5 class="card-title fw-bold mb-1">Street Food Vendors</h5>
        <p class="card-text small">Zaika Jo Chhupa Tha, Ab Milega</p>
      </div>
    </div>
  </div>

  <!-- Card 2 -->
  <div class="col-md-3 mb-3">
    <div class="card feature-image-card text-white"
         style="background-image: url('{{ url_for('static', filename='location.jpg') }}'); height: 300px; background-size: cover; background-position: center;"
         onclick="scrollToMap()">
      <div class="card-body d-flex flex-column justify-content-end">
        <h5 class="card-title fw-bold mb-1">Map-Based Search</h5>
        <p class="card-text small">Zaika, Location Pe!</p>
      </div>
    </div>
  </div>

  <!-- Card 3 -->
  <div class="col-md-3 mb-3">
    <a href="{{ url_for('main.hidden_gems') }}" class="text-decoration-none">
      <div class="card feature-image-card text-white"
           style="background-image: url('{{ url_for('static', filename='save.png') }}'); height: 300px; background-size: cover; background-position: center;">
        <div class="card-body d-flex flex-column justify-content-end">
          <h5 class="card-title fw-bold mb-1">Hidden Gems</h5>
          <p class="card-text small">Gali-Gali Mein Zaika</p>
        </div>
      </div>
    </a>
  </div>
</div>


  </div>
</section>



<!-- Banner Slideshow -->
<div id="hungryBirdCarousel" class="carousel slide carousel-fade mb-5" data-bs-ride="carousel">
  <div class="carousel-inner">

    <div class="carousel-item active">
      <img src="{{ url_for('static', filename='banners/banner7.png') }}" class="d-block w-100 rounded" alt="Banner 7">
    </div>

    <div class="carousel-item">
      <img src="{{ url_for('static', filename='banners/banner8.png') }}" class="d-block w-100 rounded" alt="Banner 8">
    </div>

    <div class="carousel-item">
      <img src="{{ url_for('static', filename='banners/banner3.png') }}" class="d-block w-100 rounded" alt="Banner 3">
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='banners/banner4.png') }}" class="d-block w-100 rounded" alt="Banner 4">
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='banners/banner5.png') }}" class="d-block w-100 rounded" alt="Banner 5">
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='banners/banner6.png') }}" class="d-block w-100 rounded" alt="Banner 6">
    </div>

  </div>

  <!-- Optional: Navigation Controls -->
  <button class="carousel-control-prev" type="button" data-bs-target="#hungryBirdCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon bg-dark rounded-circle" aria-hidden="true"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#hungryBirdCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon bg-dark rounded-circle" aria-hidden="true"></span>
  </button>
</div>






<!-- Food Category Filter -->
<div class="container mt-5">
  <h3 class="text-center fw-bold mb-4" style="font-size: 2rem; color: #e74c3c;">
    🍽️ Popular Food in <span class="selected-city">All Cities</span>
  </h3>

<!-- Horizontal Scrollable Categories -->
<div class="container-fluid px-3 py-2 overflow-auto" style="white-space: nowrap;">
  <div class="d-inline-flex" id="foodCategories">
    {% set categories = [
      ('All', 'all.png'),
      ('North Indian', 'north-indian.png'),
      ('Biryani', 'biryani.png'),
      ('Pizza', 'pizza.png'),
      ('Momo', 'momo.png'),
      ('Pav Bhaji', 'pav-bhaji.png'),
      ('Noodles', 'noodle.png'),
      ('Paratha', 'paratha.png'),
      ('Chole Bhature', 'chole-bhature.png')
    ] %}

    {% for name, image in categories %}
    <div class="text-center me-3 category" data-food="{{ name | lower }}">
      <img src="{{ url_for('static', filename=image) }}" alt="{{ name }}">
      <p>{{ name }}</p>
    </div>
    {% endfor %}
  </div>
</div>



<!-- Vendor Cards -->
<div id="vendor-section" class="container-fluid py-5" style="background-color:rgb(255, 255, 255);">
  <h3 class="text-center fw-bold" style="margin-top: 40px; margin-bottom: 40px; font-size: 3rem; color: #d9534f;">
    🍴 Popular Food in <span id="selectedCity">All Cities</span>
  </h3>

  <div class="row g-0" id="vendorCards"></div>
</div>


<div class="text-center mt-3" style="margin-bottom: 40px;">
  <button class="btn btn-warning" onclick="loadMoreVendors()">Show More</button>
</div>



<!-- Map Section -->
<div id="mapSection" class="container mb-5">
  <div id="map" style="height: 500px; border-radius: 15px;"></div>
</div>


<section id="about" class="container py-5">
  <h2 class="text-center fw-bold mb-4" style="color: #ff5722;">
    🍴 About Hungry Bird
  </h2>

  <div class="text-center mx-auto" style="max-width: 600px; font-size: 0.9rem; line-height: 1.8;">
    
    <p><strong>Hungry Bird</strong> is your go-to app to explore <span style="color: #e91e63;">authentic street food</span> around you — from <strong>momos</strong> to <strong>chaats</strong>, <strong>rolls</strong> to <strong>kebabs</strong>.</p>

    <p>With our <strong>map-based search</strong>, food category filters, and vendor ratings, we make it easy for you to find <span style="color: #4caf50;">local favorites</span> & <span style="color: #ff9800;">hidden gems</span>.</p>

    <p>✨ Our motto: <em>“Zaika Jo Chhupa Tha, Ab Milega!”</em></p>

    <p>Whether you're a foodie, a traveler, or just hungry — Hungry Bird helps you <strong>taste the city like a local</strong>, one delicious bite at a time. 🌯🍡🍧</p>

  </div>
</section>




<!-- Footer -->
<footer class="index-footer">
  Hungry Bird &copy; 2025 — All rights reserved | Made with ❤️ for foodies
</footer>



<!-- Modal for Location Error -->
<div class="modal fade" id="locationErrorModal" tabindex="-1" aria-labelledby="locationErrorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-danger">
      <div class="modal-header">
        <h5 class="modal-title">Location Access Denied</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        We couldn't detect your location. Please enable location services and try again.
      </div>
    </div>
  </div>
</div>

<script>
  const vendorData = {{ vendor_json | safe }};
  let map;
  let currentMarkers = [];
  let currentDisplayLimit = 6;
  let filteredVendors = [...vendorData];
  let selectedCity = 'All Cities';

  function initMap() {
    const defaultCenter = { lat: 26.9124, lng: 75.7873 };
    map = new google.maps.Map(document.getElementById("map"), {
      center: defaultCenter,
      zoom: 13,
    });
    updateVendorDisplay(filteredVendors, selectedCity);
  }

  function setCity(cityName, lat, lng) {
    selectedCity = cityName;
    const newCenter = { lat: lat, lng: lng };
    map.setCenter(newCenter);
    map.setZoom(14);

    filteredVendors = vendorData.filter(v => v.city === cityName);
    currentDisplayLimit = 6;
    updateVendorDisplay(filteredVendors, selectedCity);

    // Update city name on the dropdown button
    const cityButton = document.querySelector('.dropdown-toggle');
    if (cityButton) {
      let icon = '📍';
      if (cityName === 'Jaipur') icon = '🏯';
      else if (cityName === 'Delhi') icon = '🏛';
      else if (cityName === 'Mumbai') icon = '🌆';
      cityButton.innerHTML = `${icon} ${cityName}`;
    }

    scrollToVendors();
  }

  function clearMarkers() {
    currentMarkers.forEach(marker => marker.setMap(null));
    currentMarkers = [];
  }

  function updateVendorDisplay(vendors, displayTitle) {
    clearMarkers();
    const cardContainer = document.getElementById("vendorCards");
    cardContainer.innerHTML = '';
    const limited = vendors.slice(0, currentDisplayLimit);

    limited.forEach(v => {
      const marker = new google.maps.Marker({
        position: { lat: v.lat, lng: v.lng },
        map: map,
        title: v.name
      });

      const infowindow = new google.maps.InfoWindow({
        content: `<strong>${v.name}</strong><br>${v.cuisine} • ${v.city}<br>Rating: ${v.rating} ★`
      });

      marker.addListener("click", () => infowindow.open(map, marker));
      currentMarkers.push(marker);

      const cardHTML = `
        <div class="col-6 col-md-4 mb-4">
          <div class="card">
            <img loading="lazy" src="${v.image || 'https://via.placeholder.com/400x200?text=No+Image'}" class="card-img-top" alt="${v.name}" />
            <div class="card-body">
              <h5 class="card-title">${v.name}</h5>
              <p><strong>${v.cuisine}</strong> • ${v.city}</p>
              <p class="rating">${'★'.repeat(Math.floor(v.rating))}${'☆'.repeat(5 - Math.floor(v.rating))} (${v.rating})</p>
            </div>
          </div>
        </div>`;
      cardContainer.innerHTML += cardHTML;
    });

    document.querySelectorAll('.selected-city').forEach(el => {
      el.innerText = displayTitle;
    });
  }

  function loadMoreVendors() {
    currentDisplayLimit += 6;
    updateVendorDisplay(filteredVendors, selectedCity);
  }

  document.getElementById("searchBox").addEventListener("input", function () {
    const query = this.value.toLowerCase();

    let scopedData = vendorData;
    if (selectedCity !== 'All Cities') {
      scopedData = vendorData.filter(v => v.city === selectedCity);
    }

    filteredVendors = scopedData.filter(v =>
      v.name.toLowerCase().includes(query) ||
      v.cuisine.toLowerCase().includes(query) ||
      v.city.toLowerCase().includes(query)
    );

    currentDisplayLimit = 6;
    const title = query ? `Results for "${query}" in ${selectedCity}` : selectedCity;
    updateVendorDisplay(filteredVendors, title);
  });

  function scrollToMap() {
    document.getElementById('mapSection').scrollIntoView({ behavior: 'smooth' });
  }

  function scrollToVendors() {
    document.getElementById('popularVendors').scrollIntoView({ behavior: 'smooth' });
  }

  function detectLocation(auto = false) {
    const spinner = document.getElementById('locationSpinnerOverlay');
    const cityButton = document.querySelector('.dropdown-toggle');
    if (cityButton) cityButton.innerHTML = '📍 Detecting...';

    spinner.style.display = 'flex';

    navigator.geolocation.getCurrentPosition(
      (position) => {
        spinner.style.display = 'none';
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;
        const nearest = findNearestCity(lat, lng);
        if (nearest) setCity(nearest.city, nearest.lat, nearest.lng);
      },
      (error) => {
        spinner.style.display = 'none';
        if (cityButton) cityButton.innerHTML = '📍 Select City';
        if (!auto) {
          const errorModal = new bootstrap.Modal(document.getElementById('locationErrorModal'));
          errorModal.show();
        }
      }
    );
  }

  function findNearestCity(lat, lng) {
    const cities = [
      { city: 'Jaipur', lat: 26.9124, lng: 75.7873 },
      { city: 'Delhi', lat: 28.6139, lng: 77.2090 },
      { city: 'Mumbai', lat: 19.0760, lng: 72.8777 }
    ];
    let nearest = null, minDist = Infinity;
    cities.forEach(c => {
      const dist = Math.sqrt((lat - c.lat) ** 2 + (lng - c.lng) ** 2);
      if (dist < minDist) {
        minDist = dist;
        nearest = c;
      }
    });
    return nearest;
  }

  document.querySelectorAll('.category').forEach(cat => {
    cat.addEventListener('click', () => {
      const foodKeyword = cat.getAttribute('data-food').toLowerCase();

      let scopedData = vendorData;
      if (selectedCity !== 'All Cities') {
        scopedData = vendorData.filter(v => v.city === selectedCity);
      }

      if (foodKeyword === 'all') {
        filteredVendors = scopedData;
        updateVendorDisplay(filteredVendors, `${selectedCity} - All Foods`);
      } else {
        filteredVendors = scopedData.filter(v =>
          v.name.toLowerCase().includes(foodKeyword) ||
          v.cuisine.toLowerCase().includes(foodKeyword)
        );
        updateVendorDisplay(filteredVendors, `${selectedCity} - ${foodKeyword}`);
      }

      currentDisplayLimit = 6;
    });
  });

  function scrollToFoodCategory() {
    const target = document.getElementById("vendor-section");
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
  }
</script>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAN1Y6DgLtlU24YTlp77O2gR_Lw4xiC03w&callback=initMap"></script>

</body>
</html>
